# 開発計画書 - 論文管理アプリ（Go + Next.js）

## 開発目的

- Web エンジニア職を志望するにあたり、バックエンド・フロントエンド・DB を一貫して構築できる力を示す
- 研究室で実際に使える論文管理アプリとしての実用性も追求

## 開発メンバー

- 1 人（チーム想定で役割分担を意識）

| 役割                 | 担当内容                       |
| -------------------- | ------------------------------ |
| プロジェクトオーナー | ユーザー視点で機能定義         |
| スクラムマスター     | スケジュール・進行管理         |
| 開発者               | 設計・実装全般（Go + Next.js） |

## スクラム的進行

- 1 スプリント = 1 日
- 各スプリントで「設計 → 実装 → 動作確認 → 振り返り」を実施

| Sprint   | 内容                                |
| -------- | ----------------------------------- |
| Sprint 1 | 要件定義・API 設計・DB 設計         |
| Sprint 2 | Go API（CRUD）実装                  |
| Sprint 3 | Next.js フロント（一覧・登録）      |
| Sprint 4 | BibTeX/PDF 自動取得実装・統合       |
| Sprint 5 | デプロイ・README 整備・提出用まとめ |

## プロダクトに関する情報

### プロダクトビジョン

研究室で用いている論文をまとめた db をより参照しやすくし、同時にエンジニアとしてのスキルを示すためのポートフォリオ

### プロダクトバックログ

| 項目名                                                                                   | 優先度 |
| ---------------------------------------------------------------------------------------- | ------ |
| 論文一覧表示できるようにしたい                                                           | 5      |
| 検索できるようにしたい                                                                   | 5      |
| 簡単に登録できるように、一括で登録できるようにしたい                                     | 5      |
| 著者データは正規化できるようにしたい                                                     | 3      |
| フロントから簡単に論文が検索できるようにしたい                                           | 3      |
| bibtex や PDF も取得できるようにしたい                                                   | 3      |
| abstract や title とキーワード、方向性のコサイン類似度などでマッチングできるようにしたい | 4      |

## 使用技術

- Go
- SQLite + GORM
- Next.js + TailwindCSS
- Vercel / Railway

## DONE リスト（随時更新）

- [x] API & DB 設計
- [ ] Go: CRUD API 実装
- [ ] Next.js: UI 実装
- [ ] arXiv 連携
- [ ] デプロイ完了

## 開発履歴

### Sprint 1

- **プロダクトビジョン**: 研究室で用いている論文をまとめた db をより参照しやすくし、同時にエンジニアとしてのスキルを示すためのポートフォリオ
- **プロダクトバックログアイテム**

  | 項目名                                                                                   | 優先度 |
  | ---------------------------------------------------------------------------------------- | ------ |
  | 論文一覧表示できるようにしたい                                                           | 5      |
  | 検索できるようにしたい                                                                   | 5      |
  | 簡単に登録できるように、一括で登録できるようにしたい                                     | 5      |
  | 著者データは正規化できるようにしたい                                                     | 3      |
  | フロントから簡単に論文が検索できるようにしたい                                           | 3      |
  | bibtex や PDF も取得できるようにしたい                                                   | 3      |
  | abstract や title とキーワード、方向性のコサイン類似度などでマッチングできるようにしたい | 4      |

- **スプリント計画**

| Sprint   | 内容                                |
| -------- | ----------------------------------- |
| Sprint 1 | 要件定義・API 設計・DB 設計         |
| Sprint 2 | Go API（CRUD）実装                  |
| Sprint 3 | Next.js フロント（一覧・登録）      |
| Sprint 4 | BibTeX/PDF 自動取得実装・統合       |
| Sprint 5 | デプロイ・README 整備・提出用まとめ |

- **完成要件**

  - 設計完了を「API 仕様書」「DB 設計」「Git での管理体制」とする
  - 実装完了を「コード実装完了」「カバレッジ 90%以上のテストがあり、これが動く」「README が更新されている」とする

#### api設計

  | メソッド | エンドポイント    | 内容                         |
  | -------- | ----------------- | ---------------------------- |
  | GET      | `/api/papers`     | 論文一覧の取得               |
  | GET      | `/api/papers/:id` | 論文詳細の取得               |
  | POST     | `/api/papers`     | 論文の新規登録（自動取得含） |
  | PUT      | `/api/papers/:id` | 論文の更新                   |
  | DELETE   | `/api/papers/:id` | 論文の削除                   |

#### db 設計

##### papers テーブル

| カラム名       | 型       | 説明                   |
| -------------- | -------- | ---------------------- |
| id             | INTEGER  | 論文ID                |
| title          | TEXT     | 論文タイトル           |
| conference     | TEXT     | 学会名                 |
| year           | INTEGER  | 発表年                 |
| abstract       | TEXT     | 概要                   |
| url            | TEXT     | リンク先 URL           |
| citation_count | INTEGER  | 引用数                 |
| bibtex         | TEXT     | BibTeX 文字列          |
| pdf_url        | TEXT     | PDFリンク or 保存パス |
| updated_at     | DATETIME | 更新日時               |
| created_at     | DATETIME | 登録日時               |

##### authors テーブル

| カラム名  | 型       | 説明                 |
| ----- | ------- | ------------------ |
| id    | INTEGER | 著者ID               |
| name  | TEXT    | 著者名                |
| orcid | TEXT    | ORCID識別子（optional） |

##### paper_authors テーブル

| カラム名          | 型       | 説明   |
| ------------- | ------- | ---- |
| paper\_id     | INTEGER | 論文ID |
| author\_id    | INTEGER | 著者ID |
| author\_order | INTEGER | 著者順  |

#### Sprint完了

- Sprint Review
  - API仕様書完了, DB設計完了
  - バックログある程度完了
  - Gitの初期環境を構築済み
- Sprint Retrospective
  - 次のSprintへと順調に進められる
  - Go、Next.jsに理解を深めながら実装していきたい

### Sprint 2

#### DoD

- APIの実装、機能するものを作成すること
- SQLiteを用いたローカルDBでデータが永続化されている
- curlでの動作確認
- README.mdに使い方が記述されている
- テストケースが書かれている

#### API設計

- ID検索とエンドポイントとして分ける必要なし、GETメソッドに一本化する

  | メソッド | エンドポイント    | 内容                         |
  | -------- | ----------------- | ---------------------------- |
  | GET      | `/api/papers`     | 論文一覧の取得               |
  | POST     | `/api/papers`     | 論文の新規登録（自動取得含） |
  | PUT      | `/api/papers/:id` | 論文の更新                   |
  | DELETE   | `/api/papers/:id` | 論文の削除                   |
  
- 実装完了

#### SQLiteDBの実装, curlでの動作確認

- テスト済み

#### テストケース

- すべてのAPI（GET, POST, PUT, DELETE）に対して単体テストを作成
- Go + httptest + sqlite (in-memory) 、およびDBの注入により依存の少ない高速テストを実現
- テスト実行:

```bash
go test ./... -cover
```

#### Sprint完了

- Sprint Review
  - API完成、テストケース完成
  - カバレッジは60%程度なので今後余裕を見つけて拡充
- Sprint Retrospective
  - 今のところかなり順調
  - CI/CDの導入を考えたい

### Sprint 3

#### crawlerの実装